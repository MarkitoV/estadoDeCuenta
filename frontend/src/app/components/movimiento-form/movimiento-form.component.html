<h2 mat-dialog-title>Nuevo Movimiento</h2>
<mat-dialog-content>
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-container">

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Fecha</mat-label>
      <input matInput [matDatepicker]="picker" formControlName="fecha">
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <mat-error *ngIf="form.get('fecha')?.hasError('required')">
        La fecha es requerida
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Descripción</mat-label>
      <input type="text" matInput formControlName="descripcion" [matAutocomplete]="auto">
      <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onOptionSelected($event)">
        <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
          {{ option }}
        </mat-option>
      </mat-autocomplete>
      <mat-error *ngIf="form.get('descripcion')?.hasError('required')">
        La descripción es requerida
      </mat-error>
    </mat-form-field>

    <div class="row">
      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Débito</mat-label>
        <input matInput type="number" formControlName="debito" min="0" #debitoInput>
      </mat-form-field>

      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Crédito</mat-label>
        <input matInput type="number" formControlName="credito" min="0" #creditoInput>
      </mat-form-field>
    </div>

    <!-- Hidden submit button to enable Enter key submission -->
    <button type="submit" style="display: none;"></button>
  </form>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Cancelar</button>
  <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="form.invalid || loading">
    {{ loading ? 'Guardando...' : 'Guardar' }}
  </button>
</mat-dialog-actions>